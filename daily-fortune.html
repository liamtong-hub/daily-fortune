<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¯æ—¥è¿åŠ¿æ’­æŠ¥</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #fff;
        }
        .container { max-width: 600px; margin: 0 auto; }
        h1 {
            text-align: center;
            font-size: 28px;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #ffd700, #ff8c00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .date { text-align: center; color: #888; margin-bottom: 30px; }
        
        .section {
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .section h2 {
            font-size: 18px;
            margin-bottom: 15px;
            color: #ffd700;
        }
        
        .stock { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .stock:last-child { border-bottom: none; }
        .stock-name { font-weight: bold; }
        .stock-price { font-size: 20px; }
        .stock-change { padding: 4px 10px; border-radius: 6px; font-size: 14px; }
        .up { background: #f44336; color: #fff; }   /* æ¶¨=çº¢ */
        .down { background: #4caf50; color: #fff; } /* è·Œ=ç»¿ */
        .flat { background: #888; color: #fff; }
        
        .fortune { line-height: 1.8; }
        .fortune p { margin-bottom: 10px; }
        .highlight { color: #ffd700; }
        
        .loading { color: #888; text-align: center; padding: 20px; }
        .error { color: #f44336; text-align: center; padding: 20px; }
        
        .footer { text-align: center; color: #666; font-size: 12px; margin-top: 30px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ² æ¯æ—¥è¿åŠ¿æ’­æŠ¥</h1>
        <p class="date" id="date"></p>
        
        <div class="section">
            <h2>ğŸ“ˆ è‚¡ç¥¨è¡Œæƒ… <span style="font-size:12px;color:#888">(å®æ—¶)</span></h2>
            <div id="stocks">
                <p class="loading">åŠ è½½ä¸­...</p>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ”® å…«å­—è¿åŠ¿</h2>
            <div class="fortune">
                <p><span class="highlight">ä»Šæ—¥å¹²æ”¯ï¼š</span><span id="ganzhi"></span></p>
                <p><span class="highlight">å–œç”¨ï¼š</span><span id="xiyong"></span></p>
                <p><span class="highlight">äº‹ä¸šï¼š</span><span id="career"></span></p>
                <p><span class="highlight">è´¢è¿ï¼š</span><span id="fortune"></span></p>
                <p><span class="highlight">å¥åº·ï¼š</span><span id="health"></span></p>
            </div>
        </div>
        
        <p class="footer">ç”± OpenClaw è‡ªåŠ¨ç”Ÿæˆ Â· æ¯æ—¥10:00æ›´æ–°</p>
    </div>

    <script>
        // è‚¡ç¥¨é…ç½®
        const stocks = [
            { code: 'hk02513', name: 'æ™ºè°±', symbol: '02513.HK' },
            { code: 'hk00100', name: 'minimax', symbol: '00100.HK' },
            { code: 'hk01810', name: 'å°ç±³é›†å›¢', symbol: '01810.HK' }
        ];

        // è·å–ä»Šæ—¥æ—¥æœŸ
        const today = new Date();
        const dateStr = today.toLocaleDateString('zh-CN', { 
            year: 'numeric', 
            month: '2-digit', 
            day: '2-digit' 
        }).replace(/\//g, 'å¹´').replace(/^(\d+)å¹´(\d+)å¹´(\d+)å¹´/, '$1å¹´$2æœˆ$3æ—¥');
        document.getElementById('date').textContent = dateStr + ' Â· ä¹™å·³å¹´ä¸™å¯…æœˆå£¬å¯…æ—¥';

        // è·å–è‚¡ç¥¨æ•°æ®
        async function fetchStockData() {
            const results = await Promise.all(stocks.map(async (stock) => {
                try {
                    const response = await fetch(`https://hq.sinajs.cn/list=${stock.code}`, {
                        headers: { 'Referer': 'https://finance.sina.com.cn' }
                    });
                    const text = await response.text();
                    const match = text.match(/="([^"]+)"/);
                    if (match) {
                        const data = match[1].split(',');
                        return {
                            name: stock.name,
                            symbol: stock.symbol,
                            price: parseFloat(data[1]),   // å½“å‰ä»·
                            change: parseFloat(data[2]),  // æ¶¨è·Œ
                            changePct: parseFloat(data[3]) // æ¶¨è·Œå¹…
                        };
                    }
                } catch (e) {
                    console.error(e);
                }
                return null;
            }));

            const container = document.getElementById('stocks');
            const validResults = results.filter(r => r !== null);
            
            if (validResults.length === 0) {
                container.innerHTML = '<p class="error">æš‚æ— æ³•è·å–å®æ—¶æ•°æ®</p>';
                return;
            }

            container.innerHTML = validResults.map(stock => {
                const isUp = stock.change > 0;
                const isFlat = stock.change === 0;
                const cls = isFlat ? 'flat' : (isUp ? 'up' : 'down');
                const sign = isFlat ? '' : (isUp ? '+' : '');
                return `
                    <div class="stock">
                        <span class="stock-name">${stock.name} (${stock.symbol})</span>
                        <span class="stock-price">${stock.price.toFixed(2)}</span>
                        <span class="stock-change ${cls}">${sign}${stock.change.toFixed(2)}%</span>
                    </div>
                `;
            }).join('');
        }

        // å…«å­—æ•°æ®ï¼ˆéœ€è¦æ ¹æ®æ—¥æœŸè®¡ç®—ï¼Œè¿™é‡Œç”¨é™æ€ç¤ºä¾‹ï¼‰
        document.getElementById('ganzhi').textContent = 'ä¹™å·³ Â· ä¸™å¯… Â· å£¬å¯…';
        document.getElementById('xiyong').textContent = 'é‡‘ã€æ°´';
        document.getElementById('career').textContent = 'ä¼¤å®˜ç”Ÿè´¢æœˆä»½ï¼Œé¡¹ç›®æ¨è¿›é¡ºåˆ©ï¼Œé€‚åˆè°ˆåˆ¤ç­¾çº¦';
        document.getElementById('fortune').textContent = 'æ­£è´¢åˆ°ä½ï¼Œæ”¶ç›Šç¨³æ­¥å¢é•¿';
        document.getElementById('health').textContent = 'æ³¨æ„ä¼‘æ¯ï¼Œå¤šå–æ°´ä¿å…»è‚¾æ°´';

        // åˆå§‹åŒ–
        fetchStockData();
    </script>
</body>
</html>
